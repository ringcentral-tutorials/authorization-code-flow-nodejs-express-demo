<!DOCTYPE html><html><head><title>Learn RingCentral OAuth with Node.js and Express- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="Learn RingCentral OAuth with Node.js and Express"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>Learn RingCentral OAuth with Node.js and Express</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>A step by step tutorial to get you started with RingCentral OAuth in Node.js with Express</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="RingCentral OAuth demo in Node.js" class="chapter"><div data-title="Intro" data-file="images/ringcentral_logo.txt" data-highlight="1-13" class="step"><p>This is a OAuth 2.0 demo using Node.js and Express.</p>
<p>The OAuth 2.0 Authorization Code grant launches a RingCentral login window that handles username password input, including Single Sign-on.</p>
</div><div data-title="Set up the project" data-file="../README.md" data-highlight="20-22" class="step"><ul>
<li>Clone the demo repo with git.</li>
<li>Install dependencies with NPM</li>
</ul>
<p><em>To install NPM, please install <a href="https://nodejs.org/">Node.js</a></em></p>
</div><div data-title="Configure the app appropriately" data-file="../config-sample.env" class="step"><h2 id="configuration">Configuration</h2>
<p>Edit the <code>.env</code> file to configure your client ID, client secret and redirect URL, etc.</p>
<pre><code>$ cp config-sample.env .env
$ vi .env
</code></pre><p>Please visit <a href="http://developer.ringcentral.com/">Developer Portal</a> to apply client ID and secret. And ensure the redirect URI in your config file has been entered in your app settings. By default, the URL is set to the following for this demo:</p>
<pre><code>http://localhost:8080/oauth2callback
</code></pre></div><div data-title="Create RingCentral SDK instance" data-file="../app.js" data-highlight="40-44" class="step"><p>In the node.js entry file, create RingCentral SDK instance with parameters from the configuration file.</p></div><div data-title="Get login URL" data-file="../app.js" data-highlight="53-56" class="step"><p>Get login URL from RingCentral SDK instance. The <code>authorize_uri</code> in the code is the login URL. It will be passed to the HTML page as template variable by mustache template engine.</p>
</div><div data-title="Open login window" data-file="../views/index.mustache" data-highlight="18" class="step"><p>When the user click the login button in the HTML page, open a new window with the login URL passed from node.js.</p></div><div data-title="Parse callback URL and login" data-file="../app.js" data-highlight="62-80" class="step"><p>When login finished, plaform will redirect to the callback URL(the configured redirect URL). We handle the callback URL with express route method. In the route method, we can get the auth code from query. With this auth code, we can call the <code>login</code> API of the SDK to log into RingCentral platform.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="images/ringcentral_logo.txt" data-mode="text">UmluZ0NlbnRyYWwgTm9kZS5qcyBPQXV0aCAyLjAgZGVtbwoKICAgX19fICBfICAgICAgICAgICBfX19fXyAgICAgICAgIF9fICAgICAgICAgICBfXwogIC8gXyBcKF8pX18gIF9fXyBfLyBfX18vX18gX19fICAvIC9fX19fX19fXyBfLyAvCiAvICwgXy8gLyBfIFwvIF8gYC8gL19fLyAtXykgXyBcLyBfXy8gX18vIF8gYC8gLyAKL18vfF8vXy9fLy9fL1xfLCAvXF9fXy9cX18vXy8vXy9cX18vXy8gIFxfLF8vXy8gIAogIC8gXyBcX19fIF8vX19fL19fIC8gL19fICBfX18gIF9fXyBfX19fX19fICAgICAgCiAvIC8vIC8gLV8pIHwvIC8gLV8pIC8gXyBcLyBfIFwvIC1fKSBfXyhfLTwgICAgICAKL19fX18vXF9fL3xfX18vXF9fL18vXF9fXy8gLl9fL1xfXy9fLyAvX19fLyAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvXy8gICAgICAgICAgICAgICAgICAgICAgCgpodHRwczovL2RldmVsb3BlcnMucmluZ2NlbnRyYWwuY29t</textarea>
<textarea class="saurus-file" data-file="../README.md" data-mode="markdown">IyBSaW5nQ2VudHJhbCAzLUxlZ2dlZCBPQXV0aCBEZW1vIGluIE5vZGUuanMgd2l0aCBFeHByZXNzCgpbIVtDb21tdW5pdHldW2NvbW11bml0eS1pbWddXVtjb21tdW5pdHktdXJsXQpbIVtUd2l0dGVyXVt0d2l0dGVyLWltZ11dW3R3aXR0ZXItdXJsXQoKIFtjb21tdW5pdHktaW1nXTogaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9keW5hbWljL2pzb24uc3ZnP2xhYmVsPWNvbW11bml0eSZjb2xvckI9JnN1ZmZpeD0lMjB1c2VycyZxdWVyeT0kLmFwcHJveGltYXRlX3Blb3BsZV9jb3VudCZ1cmk9aHR0cCUzQSUyRiUyRmFwaS5nZXRzYXRpc2ZhY3Rpb24uY29tJTJGY29tcGFuaWVzJTJGMTAyOTA5Lmpzb24KIFtjb21tdW5pdHktdXJsXTogaHR0cHM6Ly9kZXZjb21tdW5pdHkucmluZ2NlbnRyYWwuY29tL3JpbmdjZW50cmFsZGV2CiBbdHdpdHRlci1pbWddOiBodHRwczovL2ltZy5zaGllbGRzLmlvL3R3aXR0ZXIvZm9sbG93L3JpbmdjZW50cmFsZGV2cy5zdmc/c3R5bGU9c29jaWFsJmxhYmVsPWZvbGxvdwogW3R3aXR0ZXItdXJsXTogaHR0cHM6Ly90d2l0dGVyLmNvbS9SaW5nQ2VudHJhbERldnMKCiMjIE92ZXJ2aWV3CgpUaGlzIGlzIGEgcXVpY2sgMy1sZWdnZWQgT0F1dGggZGVtbyB0aGF0IHJ1bnMgdXNpbmcgSmF2YVNjcmlwdCwgTm9kZS5qcyBhbmQgRXhwcmVzcyB3aXRoIHRoZSBbUmluZ0NlbnRyYWwgSmF2YVNjcmlwdCBTREtdKGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC9yaW5nY2VudHJhbC1qcykgdjIueAoKIyMgSW5zdGFsbGF0aW9uCgojIyMgVmlhIE5QTQoKYGBgCiQgZ2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC10dXRvcmlhbHMvb2F1dGgtbm9kZWpzLWRlbW8KJCBjZCBvYXV0aC1ub2RlanMtZGVtbwokIG5wbSBpbnN0YWxsCmBgYAoKIyMjIENvbmZpZ3VyYXRpb24KCkVkaXQgdGhlIGAuZW52YCBmaWxlIGFuZCBhZGQgeW91ciBSaW5nQ2VudHJhbCBBUEkgS2V5cyAoYXBwbGljYXRpb24ga2V5IGFuZCBhcHBsaWNhdGlvbiBzZWNyZXQpLgoKYGBgCiQgY2Qgb2F1dGgtbm9kZWpzLWRlbW8KJCBtdiBjb25maWctc2FtcGxlLmVudiAuZW52CiQgdmkgLmVudgpgYGAKCkluIHRoZSBbRGV2ZWxvcGVyIFBvcnRhbF0oaHR0cDovL2RldmVsb3Blci5yaW5nY2VudHJhbC5jb20vKSwgZW5zdXJlIHRoZSByZWRpcmVjdCBVUkkgaW4geW91ciBjb25maWcgZmlsZSBoYXMgYmVlbiBlbnRlcmVkIGluIHlvdXIgYXBwIGNvbmZpZ3VyYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSBVUkwgaXMgc2V0IHRvIHRoZSBmb2xsb3dpbmcgZm9yIHRoaXMgZGVtbzoKCmBgYApodHRwOi8vbG9jYWxob3N0OjgwODAvb2F1dGgyY2FsbGJhY2sKYGBgCgojIyMjIFVzaW5nIFRMUwoKSWYgeW91IHNldCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnMsIHlvdSBjYW4gc3RhcnQgdGhpcyBkZW1vIHVzaW5nIFRMUy4gQmUgc3VyZSB5b3UgYXJlIHVzaW5nIEhUVFBTIGZvciB5b3VyIHJlZGlyZWN0IFVSSS4KCnwgUHJvcGVydHkgfCBJbmZvcm1hdGlvbiB8CnwtLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS18CnwgYFRMU19FTkFCTEVEYCB8IFNldCB0byBgMWAgZm9yIEhUVFBTIGFuZCBgMGAgZm9yIEhUVFAgfAp8IGBUTFNfUFJJVkFURV9LRVlgIHwgU2V0IHRvIHBhdGggdG8gUEVNIGZpbGUgZm9yIHByaXZhdGUga2V5IHwKfCBgVExTX0NFUlRJRklDQVRFYCB8IFNldCB0byBwYXRoIHRvIFBFTSBmaWxlIGZvciBjZXJ0aWZpY2F0ZSB8CgojIyBVc2FnZQoKU3RhcnQgdGhlIGFwcGxpY2F0aW9uIHVzaW5nIHRoZSBbTlBNXShodHRwczovL3d3dy5ucG1qcy5jb20vKSBjb21tYW5kOgoKYGBgCiQgbnBtIHN0YXJ0CmBgYAoKT3BlbiB5b3VyIGJyb3dzZXIgYW5kIGdvIHRvIHRoZSBEZW1vIEFwcCBVUkw6CgpgYGAKaHR0cDovL2xvY2FsaG9zdDo4MDgwCmBgYGAKClRoZW4gY2xpY2sgdGhlIDxpbnB1dCB0eXBlPSJidXR0b24iIHZhbHVlPSJMb2dpbiB3aXRoIFJpbmdDZW50cmFsIj4gYnV0dG9uIHRvIGF1dGhvcml6ZSB0aGUgZGVtbyBhcHAgYW5kIHZpZXcgdGhlIGFjY2VzcyB0b2tlbi4KCiMjIFNjcmVlbnNob3RzCgpUaGUgZm9sbG93aW5nIGFyZSBleGFtcGxlIHNjcmVlbnNob3RzIG9mIHRoZSBhdXRoZW50aWNhdGlvbiBhbmQgYXV0aG9yaXphdGlvbiBwYWdlcyBzaG93bi4KCiMjIyBBdXRoZW50aWNhdGlvbgoKIVtdKGRvY3MvaW1hZ2VzL3JpbmdjZW50cmFsX29hdXRoX2F1dGhlbnRpY2F0aW9uLnBuZykKCiMjIyBBdXRob3JpemF0aW9uCgohW10oZG9jcy9pbWFnZXMvcmluZ2NlbnRyYWxfb2F1dGhfYXV0aG9yaXphdGlvbi5wbmcpCgojIyBMaW5rcwoKKiBEb2N1bWVudGF0aW9uCiAgKiBbUmluZ0NlbnRyYWwgRGV2ZWxvcGVyIEd1aWRlXShodHRwczovL2RldmVsb3Blci5yaW5nY2VudHJhbC5jb20vYXBpLWRvY3MvbGF0ZXN0L2luZGV4Lmh0bWwjISNBdXRob3JpemF0aW9uQ29kZUZsb3cpCiAgKiBbSUVURiBPQXV0aCAyLjAgUkZDXShodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjc0OSkgW0F1dGhvcml6YXRpb24gQ29kZSBmbG93XShodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjc0OSNzZWN0aW9uLTEuMy4xKQoqIFNES3Mgd2l0aCBidWlsdC1pbiBBdXRob3JpemF0aW9uIENvZGUgaGVscGVycyAob3RoZXJzLCBsaWtlIFB5dGhvbiBjYW4gc3RpbGwgYmUgdXNlZCkKICAqIFtyaW5nY2VudHJhbC1qc10oaHR0cHM6Ly9naXRodWIuY29tL3JpbmdjZW50cmFsL3JpbmdjZW50cmFsLWpzKQoKIyMgQ29udHJpYnV0aW5nCgoxLiBGb3JrIGl0IChodHRwOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC10dXRvcmlhbHMvcmluZ2NlbnRyYWwtZGVtb3Mtb2F1dGgvZm9yaykKMi4gQ3JlYXRlIHlvdXIgZmVhdHVyZSBicmFuY2ggKGBnaXQgY2hlY2tvdXQgLWIgbXktbmV3LWZlYXR1cmVgKQozLiBDb21taXQgeW91ciBjaGFuZ2VzIChgZ2l0IGNvbW1pdCAtYW0gJ0FkZCBzb21lIGZlYXR1cmUnYCkKNC4gUHVzaCB0byB0aGUgYnJhbmNoIChgZ2l0IHB1c2ggb3JpZ2luIG15LW5ldy1mZWF0dXJlYCkKNS4gQ3JlYXRlIG5ldyBQdWxsIFJlcXVlc3QK</textarea>
<textarea class="saurus-file" data-file="../config-sample.env" data-mode="text">UklOR0NFTlRSQUxfQ0xJRU5UX0lEPW15Q2xpZW50SWQKUklOR0NFTlRSQUxfQ0xJRU5UX1NFQ1JFVD1teUNsaWVudFNlY3JldApSSU5HQ0VOVFJBTF9TRVJWRVJfVVJMPWh0dHBzOi8vcGxhdGZvcm0uZGV2dGVzdC5yaW5nY2VudHJhbC5jb20KUklOR0NFTlRSQUxfUkVESVJFQ1RfVVJMPWh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9vYXV0aDJjYWxsYmFjawpIT1NUPWxvY2FsaG9zdApQT1JUPTgwODAKVExTX0VOQUJMRUQ9MApUTFNfUFJJVkFURV9LRVk9cHJpdmF0ZS1rZXkucGVtClRMU19QVUJMSUNfQ0VSVD1wdWJsaWMtY2VydC5wZW0K</textarea>
<textarea class="saurus-file" data-file="../app.js" data-mode="javascript">aWYgKHByb2Nlc3MuZW52LkVOVl9QQVRIKSB7CiAgcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKHtwYXRoOiBwcm9jZXNzLmVudi5FTlZfUEFUSH0pOwp9IGVsc2UgewogIHJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpOwp9Cgp2YXIgYXBwID0gcmVxdWlyZSgnZXhwcmVzcycpKCk7CnZhciByaW5nY2VudHJhbCA9IHJlcXVpcmUoJ3JpbmdjZW50cmFsJyk7CgovLyBDb25maWd1cmUgTXVzdGFjaGUKdmFyIG11c3RhY2hlRXhwcmVzcyA9IHJlcXVpcmUoJ211c3RhY2hlLWV4cHJlc3MnKTsKYXBwLmVuZ2luZSgnbXVzdGFjaGUnLCBtdXN0YWNoZUV4cHJlc3MoKSk7CmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ211c3RhY2hlJyk7CmFwcC5zZXQoJ3ZpZXdzJywgX19kaXJuYW1lICsgJy92aWV3cycpOwoKLy8gU3RhcnQgSFRUUCBzZXJ2ZXIKdmFyIHNlcnZlciA9IG51bGw7CmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUOwpjb25zdCB1c2VUbHMgPSBwcm9jZXNzLmVudi5UTFNfRU5BQkxFRCA+IDAgPyB0cnVlIDogZmFsc2U7CgppZiAodXNlVGxzKSB7CiAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTsKICBzZXJ2ZXIgPSByZXF1aXJlKCdodHRwcycpCiAgICAuY3JlYXRlU2VydmVyKHsKICAgICAga2V5OiBmcy5yZWFkRmlsZVN5bmMocHJvY2Vzcy5lbnYuVExTX1BSSVZBVEVfS0VZKSwKICAgICAgY2VydDogZnMucmVhZEZpbGVTeW5jKHByb2Nlc3MuZW52LlRMU19QVUJMSUNfQ0VSVCkKICAgIH0sIGFwcCkKICAgIC5saXN0ZW4ocG9ydCwgZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygnTElTVEVOX0hUVFBTICcgKyBwb3J0KTsKICAgIH0pOwp9IGVsc2UgewogIHNlcnZlciA9IHJlcXVpcmUoJ2h0dHAnKQogICAgLlNlcnZlcihhcHApCiAgICAubGlzdGVuKHBvcnQsIGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJ0xJU1RFTl9IVFRQICcgKyBwb3J0KTsKICAgIH0pOwp9CgovLyBTdGFydCBSaW5nQ2VudHJhbCBTREsKY29uc3QgcmNzZGsgPSBuZXcgcmluZ2NlbnRyYWwoewogIHNlcnZlcjogcHJvY2Vzcy5lbnYuUklOR0NFTlRSQUxfU0VSVkVSX1VSTCwKICBhcHBLZXk6IHByb2Nlc3MuZW52LlJJTkdDRU5UUkFMX0NMSUVOVF9JRCwKICBhcHBTZWNyZXQ6IHByb2Nlc3MuZW52LlJJTkdDRU5UUkFMX0NMSUVOVF9TRUNSRVQKfSk7Cgpjb25zdCBwbGF0Zm9ybSA9IHJjc2RrLnBsYXRmb3JtKCkKCmFwcC5nZXQoJy8nLCBmdW5jdGlvbiAocmVxLCByZXMpIHsKICAvLyBHZXQgdG9rZW4gZm9yIGRpc3BsYXkgYWZ0ZXIgT0F1dGgKICB2YXIgdG9rZW4gPSBwbGF0Zm9ybS5hdXRoKCkuZGF0YSgpOwogIHRva2VuX2pzb24gPSB0b2tlblsnYWNjZXNzX3Rva2VuJ10gPyBKU09OLnN0cmluZ2lmeSh0b2tlbiwgbnVsbCwgJyAnKSA6ICcnOwoKICAvLyBSZW5kZXIgaG9tZSBwYWdlIHdpdGggcGFyYW1zCiAgcmVzLnJlbmRlcignaW5kZXgnLCB7CiAgICBhdXRob3JpemVfdXJpOiBwbGF0Zm9ybS5hdXRoVXJsKHsKICAgICAgYnJhbmRJZDogcHJvY2Vzcy5lbnYuUklOR0NFTlRSQUxfQlJBTkRfSUQsICAgICAgICAvLyBvcHRpb25hbAogICAgICByZWRpcmVjdFVyaTogcHJvY2Vzcy5lbnYuUklOR0NFTlRSQUxfUkVESVJFQ1RfVVJMIC8vIG9wdGlvbmFsIGlmIDEgY29uZmlndXJlZAogICAgfSksCiAgICByZWRpcmVjdF91cmk6IHByb2Nlc3MuZW52LlJJTkdDRU5UUkFMX1JFRElSRUNUX1VSTCwKICAgIHRva2VuX2pzb246IHRva2VuX2pzb24KICB9KTsKfSk7CgphcHAuZ2V0KCcvb2F1dGgyY2FsbGJhY2snLCBmdW5jdGlvbihyZXEsIHJlcykgewogIGlmIChyZXEucXVlcnkuY29kZSkgewogICAgcGxhdGZvcm0KICAgICAgLmxvZ2luKHsKICAgICAgICBjb2RlOiByZXEucXVlcnkuY29kZSwKICAgICAgICByZWRpcmVjdFVyaTogcHJvY2Vzcy5lbnYuUklOR0NFTlRSQUxfUkVESVJFQ1RfVVJMCiAgICAgIH0pCiAgICAgIC50aGVuKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgIC8vIFlvdSBzaG91bGQgc3RvcmUgeW91ciB0b2tlbiBpbiB0aGUgc2Vzc2lvbiBoZXJlCiAgICAgICAgY29uc29sZS5sb2coJ2xvZ2dlZF9pbicpOwogICAgICAgIHJlcy5zZW5kKCdsb2dpbiBzdWNjZXNzJyk7CiAgICAgIH0pCiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdFUlIgJyArIGUubWVzc2FnZSB8fCAnU2VydmVyIGNhbm5vdCBhdXRob3JpemUgdXNlcicpOwogICAgICAgIHJlcy5zZW5kKCdMb2dpbiBlcnJvciAnICsgZSk7CiAgICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXMuc2VuZCgnTm8gQXV0aCBjb2RlJyk7CiAgfQp9KTsK</textarea>
<textarea class="saurus-file" data-file="../views/index.mustache" data-mode="handlebars">PCFET0NUWVBFIGh0bWw+CjxodG1sPgogICAgPGhlYWQ+CiAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgICAgIDxzY3JpcHQ+Cgp2YXIgY29uZmlnID0gewogICAgYXV0aFVyaTogJ3t7eyBhdXRob3JpemVfdXJpIH19fScsCiAgICByZWRpcmVjdFVyaTogJ3t7eyByZWRpcmVjdF91cmkgfX19JywKfQoKdmFyIE9BdXRoQ29kZSA9IGZ1bmN0aW9uKGNvbmZpZykgewogICAgdGhpcy5jb25maWcgPSBjb25maWc7CiAgICB0aGlzLmxvZ2luUG9wdXAgID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5sb2dpblBvcHVwVXJpKHRoaXMuY29uZmlnWydhdXRoVXJpJ10sIHRoaXMuY29uZmlnWydyZWRpcmVjdFVyaSddKTsKICAgIH0KICAgIHRoaXMubG9naW5Qb3B1cFVyaSAgPSBmdW5jdGlvbihhdXRoVXJpLCByZWRpcmVjdFVyaSkgewogICAgICAgIHZhciB3aW4gICAgICAgICA9IHdpbmRvdy5vcGVuKGF1dGhVcmksICd3aW5kb3duYW1lMScsICd3aWR0aD04MDAsIGhlaWdodD02MDAnKTsgCgogICAgICAgIHZhciBwb2xsT0F1dGggICA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh3aW4uZG9jdW1lbnQuVVJMKTsKICAgICAgICAgICAgICAgIGlmICh3aW4uZG9jdW1lbnQuVVJMLmluZGV4T2YocmVkaXJlY3RVcmkpICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbE9BdXRoKTsKICAgICAgICAgICAgICAgICAgICB3aW4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgIH0KfQoKdmFyIG9hdXRoID0gbmV3IE9BdXRoQ29kZShjb25maWcpOwoKICAgICAgICA8L3NjcmlwdD4KICAgIDwvaGVhZD4KICAgIDxib2R5PgogICAgICAgIDxoMT5SaW5nQ2VudHJhbCAzLUxlZ2dlZCBPQXV0aCBEZW1vIGluIEphdmFTY3JpcHQgd2l0aCBFeHByZXNzPC9oMT4KCiAgICAgICAgPHA+PGlucHV0IHR5cGU9ImJ1dHRvbiIgb25jbGljaz0ib2F1dGgubG9naW5Qb3B1cCgpIiB2YWx1ZT0iTG9naW4gd2l0aCBSaW5nQ2VudHJhbCI+PC9wPgoKICAgICAgICA8cD5BY2Nlc3MgVG9rZW48L3A+CiAgICAgICAgPHByZSBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojZWZlZmVmO3BhZGRpbmc6MWVtO292ZXJmbG93LXg6c2Nyb2xsIj57eyB0b2tlbl9qc29uIH19PC9wcmU+CgogICAgICAgIDxwPk1vcmUgaW5mbzo8L3A+CiAgICAgICAgPHVsPgogICAgICAgICAgICA8bGk+PGEgaHJlZj0iaHR0cHM6Ly9kZXZlbG9wZXIucmluZ2NlbnRyYWwuY29tL2FwaS1kb2NzL2xhdGVzdC9pbmRleC5odG1sIyEjQXV0aG9yaXphdGlvbkNvZGVGbG93Ij5SaW5nQ2VudHJhbCBBUEkgRGV2ZWxvcGVyIEd1aWRlPC9hPjwvbGk+CiAgICAgICAgICAgIDxsaT48YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vcmluZ2NlbnRyYWwtdHV0b3JpYWxzL29hdXRoLW5vZGVqcy1kZW1vIj5HaXRIdWIgcmVwbzwvYT4KICAgICAgICA8L3VsPgogICAgPC9ib2R5Pgo8L2h0bWw+Cg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/ringcentral-tutorials/oauth-nodejs-demo" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/ringcentral-tutorials/oauth-nodejs-demo/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="Learn RingCentral OAuth with Node.js and Express";</script><script src="viewsaurus.js"></script></body></html>